#!/usr/bin/env perl
# $Id: pyx_xml_normalization,v 1.16 2006-04-10 01:23:47 skim Exp $

# Pragmas.
use strict;
use warnings;

# Modules.
use PYX::XMLNorm;

# Open file.
my $input_file_handler = \*STDIN;
if ($ARGV[0]) {
	if (! open(INF, "<$ARGV[0]")) {
		die "Cannot open file '$ARGV[0]'.";
	}
	$input_file_handler = \*INF;
}

# TODO
# Pridat flag pro flush stack :p

# PYX::XMLNorm object.
my $sorter = PYX::XMLNorm->new(
	'rules' => {
		'tr' => ['th', 'td', 'tr'],
		'td' => ['td'],
		'th' => ['th'],
		'p' => ['p'],
		'div' => ['p'],
		'table' => ['td', 'tr'],
		'html' => ['body'],
		'*' => ['br', 'hr', 'link', 'meta', 'input', 'img']
	},
);
$sorter->parse_handler($input_file_handler);

# Close file.
if ($ARGV[0]) {
	close(INF);
}

